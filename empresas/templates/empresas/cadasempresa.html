<!DOCTYPE html>
{% load static %}
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'styles/cadastroprincipal.css' %}">
  <title>PARKIN</title>
</head>
<body>
  <header>
    <a href="/"><img src="{% static 'img/Logo.png' %}"></a>
  </header>
  <main>
    <div class="centro">
      <h1>Cadastrar-se</h1>
      <div class="botoes">
        <a href="/clientes/cadastrar">Clientes</a>
        <a href="/empresas/cadastrar" class="ativo">Empresa</a>
      </div>
      <div class="conteudo" id="empresa">
        <form action="" method="post">
          {% csrf_token %}
            <div class="import">
              <img src="{% static 'assets/img/user.png' %}">
              <input type="text" name="nome" id="nome" required>
              <label for="nome">Nome Fantasia</label>
            </div>
            <div class="import">
              <img src="{% static 'assets/img/key.png' %}">
              <input type="text" name="razao" id="razao" required>
              <label for="razao">Razão Social</label>
            </div>
            <div class="import">
              <img src="{% static 'assets/img/email.png' %}">
              <input type="email" name="email" id="email" required>
              <label for="email">Email</label>
            </div>
            {%if erro_email != ''%}
            <span style="color: red;">{{erro_email}}</span>
            {%endif%}
            <div class="import">
              <img src="{% static 'assets/img/key.png' %}">
              <input type="password" name="senha" id="senha" required>
              <label for="senha">Senha</label>
            </div>
            <div class="import">
              <img src="{% static 'assets/img/key.png' %}">
              <input type="password" name="senha2" id="senha2" required>
              <label for="senha">Confirme sua senha</label>
            </div>
            {%if erro_senha != ''%}
            <span style="color: red;">{{erro_senha}}</span>
            {%endif%}
            <div class="import">
              <img src="{% static 'assets/img/key.png' %}">
              <input type='text' name='cnpj' id="cnpj" maxlength="18">
              <label for="senha">CNPJ</label>
            </div>
            {%if erro_cnpj != ''%}
            <span style="color: red;">{{erro_cnpj}}</span>
            {%endif%}
          <div class="check">
            <input type="checkbox" name="check" id="check">
            <a href="/"> Termos de consentimento</a>
          </div>
          {%if erro_check != ''%}
          <span style="color: red;">{{erro_check}}</span>
          {%endif%}
          <div class="entrar">
            <p>Já possui uma conta?</p>
            <a href="/empresas/entrar/">Entrar</a>
          </div>
          <input type="submit" value="Cadastrar" id="button">
        </form>
      </div>
    </div>
  </main>
  <footer>
    {%block footer%}
      {%include 'main/footer.html'%}
    {%endblock%}
  </footer>
  <script>
    // Função para formatar CNPJ
    function formatCNPJ(cnpj) {
      cnpj = cnpj.replace(/\D/g, '');
      return cnpj.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/, '$1.$2.$3/$4-$5');
    }

    // Adicionando evento de input para formatar CNPJ
    document.getElementById('cnpj').addEventListener('input', function (event) {
      var target = event.target;
      var input = target.value.replace(/\D/g, '');
      var formattedInput = formatCNPJ(input);
      target.value = formattedInput;
    });
  </script>
</body>
</html>